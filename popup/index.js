$(function(){function e(e){function o(){var e=$("#audio").val();e&&chrome.runtime.sendMessage({channel:"audio",data:e},function(){})}function c(){r.val($("#spelling").text()),t()}function n(){l(d.val()),e.auto_audio=g.prop("checked"),chrome.runtime.sendMessage({channel:"set",data:{btn:k.prop("checked"),dblclick:m.prop("checked"),shift:v.prop("checked"),auto_audio:g.prop("checked"),from:u.val(),to:d.val()}},function(){})}function t(){var c=$.trim(r.val());if(r.val(c),!c.length)return void r.focus();r.prop("disabled",!0),h.prop("disabled",!0),s.hide();var n=chrome.i18n.getMessage("translating");h.find(".locale").html(n?n:"Translating..."),i(c,function(c){r.prop("disabled",!1),h.prop("disabled",!1),s.show(),r.focus();var n=chrome.i18n.getMessage("translate");h.find(".locale").html(n?n:"Translate"),a(c),e.auto_audio&&o()})}function a(e){s.html(e)}function i(e,o){chrome.runtime.sendMessage({channel:"translate",src:"popup",data:e},function(e){o(e)})}function l(e){["ar","fa","iw","yi","ur","pa"].indexOf(e)>-1?$("body").css("direction","rtl"):$("body").css("direction","ltr")}var r=$("#from_text"),u=$("#from_select"),s=$("#to_text"),d=$("#to_select"),h=$("#search"),f=$("#clear"),p=$("#switcher"),k=$("#checkbox_btn"),m=$("#checkbox_dblclick"),v=$("#checkbox_shift"),g=$("#checkbox_auto_audio");l(e.to),u.val(e.from),d.val(e.to),r.val(e.from_text),k.prop("checked",e.btn),m.prop("checked",e.dblclick),v.prop("checked",e.shift),g.prop("checked",e.auto_audio),e.to_text&&a(e.to_text),setTimeout(function(){r.focus()},50),k.on("change",n),m.on("change",n),v.on("change",n),g.on("change",n),u.on("change",n),d.on("change",n),r.focus(function(){r.select()}),f.on("click",function(){r.val(""),r.focus()}),h.on("click",t),r.on("keyup",function(e){13===e.keyCode&&t()}),p.on("click",function(){var e=u.val(),o=d.val();"auto"!==e&&(u.val(o),d.val(e),n())}),$(document).on("click","#spelling",c),$(document).on("click","#audio",o)}chrome.runtime.sendMessage({channel:"get"},function(o){e(o)})});